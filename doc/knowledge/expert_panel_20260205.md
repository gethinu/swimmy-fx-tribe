# 🦅 Expert Panel Report (Consult)

**Date:** 2026-02-05
**Leader:** Elon Musk
**Mode:** consult
**Trigger:** 「シモンズに聞いて。非相関ペア戦略のしきい値はどうする？」
**Purpose:** 「非相関ペア戦略」の相関しきい値（|corr|≤0.2/0.3/動的）を決める。
**Constraints:** 既存単一戦略ロジックは壊さない。PnL相関を正本にする前提。docs/llmを正本とする。
**Success Criteria:** 1) しきい値が決まる 2) サンプル数条件が明文化される 3) 既存相関ロジックと混線しない。
**Assumptions:** PnL相関は `school-portfolio.lisp` を参照可能（`src/lisp/school/school-portfolio.lisp:40-66`）。
**Uncertainties:** OOS/CPCV/BacktestのPnL系列の長さ・欠損率。

## 🏛️ 常設顧問の意見
### Taleb:
- **批判**: しきい値の数字よりも「サンプル不足」が致命的。小サンプル相関はノイズで、リスク制御どころか**誤誘導**になる。
- **選択肢**:
  1) **|corr|≤0.2 + サンプル閾値**（最小Nトレード）
  2) **|corr|≤0.3 + サンプル閾値**（緩め）
  3) **動的しきい値**（環境で緩める）
- **トレードオフ**: 1は保守的。2は候補を増やせるが誤認増。3は柔軟だが設計複雑。
- **反証**: 0.2は厳しすぎて候補が枯れる可能性。

### Graham:
- **批判**: 数字を細かくいじるより、**まず運用できる閾値を固定**すべき。変えるなら後。
- **選択肢**:
  1) **0.2固定**
  2) **0.3固定**
  3) **動的**
- **トレードオフ**: 0.2は厳格で数が出にくい。0.3は現実的だが“非相関”の意味が薄れる。動的は説明が難しい。

### Naval:
- **批判**: しきい値の最適化は最初は不要。**決めて動かす**が優先。
- **選択肢**:
  1) 0.2で開始し、運用で見直し
  2) 0.3で開始し、フィルタを強化
  3) 動的は後回し
- **トレードオフ**: 1は厳しいが思想に忠実。2は実用性重視。

### Simons:
- **批判**: 「非相関」を語るなら統計的な**信頼度の条件**を先に置け。しきい値単独は不十分。
- **選択肢**:
  1) **|corr|≤0.2 + 最低サンプル数N（例: 50-100トレード）**
  2) **|corr|≤0.3 + サンプル数N（同上）**
  3) **動的しきい値 + サンプル数N**
- **トレードオフ**: 0.2は厳格で候補減。0.3は候補増だが偽相関が混入。動的は設計・説明コストが高い。
- **Simons結論**: **0.2を正本**にして、**サンプル数条件を必須**にする。候補枯渇時のみ0.3を“救済モード”として限定使用。

## 💻 技術パネルの意見
### Fowler:
- **批判**: しきい値が1つでも、サンプル条件が無いとロジックが壊れる。
- **根拠**: PnL相関の計算は `src/lisp/school/school-portfolio.lisp:56-66` にあるが、**サンプル数のゲートはない**。

### Hickey:
- **批判**: “動的しきい値”はデータ構造に複雑性を持ち込む。最初は固定値で良い。

### Uncle Bob:
- **批判**: しきい値の仕様はテストで固定しろ。
- **具体**: 0.2/0.3の境界条件とサンプル数条件をユニットで保証する。

## 🚀 ビジョナリーの意見
### Ng:
- **批判**: しきい値はAIよりも運用の制御。**まずは保守的**に始めるべき。

### López de Prado:
- **批判**: 相関の推定は不安定。小サンプルでの「非相関」判定は危険。
- **提案**: サンプル数ゲート＋0.2で開始、候補が不足するなら0.3。

### Gene Kim:
- **批判**: 運用上は「説明可能性」が重要。動的は説明が難しい。

## 🚀 Musk's Decision (Final)
> 「Simonsに従う。**|corr|≤0.2を正本**、ただし**最低サンプル数N**を必須にする。候補が枯れたら0.3の救済モードを追加する。動的は後回し。」

## Actionable Items
1. **しきい値の決定**: 正本は **|corr|≤0.2**。救済モードで **|corr|≤0.3** を許可。
2. **サンプル数条件**: PnL系列の最小長N（例: 50-100トレード）を仕様に入れる。
3. **テスト追加**: 0.2/0.3境界とサンプル数ゲートのユニットテストを追加。
