# ⚖️ V50.2 Design Comparison: Evolution 2.0

**目的**: ユーザーの「設計イメージ」と「現状システム」の差異を明確化し、移行のメリット・デメリットを可視化する。

## 1. コア概念の比較

| 項目 | V49.8 (Current) | V50.2 (New Design) | 変化のポイント |
|:---|:---|:---|:---|
| **基本思想** | **絶対評価** (基準を超えれば合格) | **相対評価 & 競争** (他より優れていれば合格) | 生き残りが過酷になり、質の高い戦略のみが残る |
| **タイムフレーム** | H1 (1時間足) が中心 | **M5, M15, H1, H4, D1, W1, MN1** | 全時間足への拡張 (スキャルから長期まで) |
| **バックテスト** | 単一期間 (2006-2024) | **2段階方式** (Screening + Validation) | 「過去で良くても直近でダメな戦略」を排除 |

---

## 2. ライフサイクルの比較

| 項目 | V49.8 (Current) | V50.2 (New Design) |
|:---|:---|:---|
| **審査 (Phase 1)** | 全期間でバックテスト<br>Sharpe >= 0.1 | **2006-2020 (15年) でバックテスト**<br>Sharpe >= 0.1, PF >= 1.0, WR >= 30% |
| **Bランク滞留** | 無制限に蓄積 | **定員100枠 (Pool)**<br>枠が埋まったらデスゲーム開始 |
| **Aランク昇格** | OOS検証 (3割データ) 合格 | **Bランク Top 2** → **OOS検証 (3割)**<br>競争に勝ち、かつ未知のデータで検証 |
| **Sランク昇格** | CPCV検証 合格 | **CPCV検証 (Combinatorial Purged CV)**<br>OOS合格後、さらに厳格なCPCVをパスしたもの |
| **交配 (Breeding)** | ランダム or スコア比例<br>親も子も共存 | **親子デスマッチ**<br>優れた方だけが生存 (敗者は即死) |
| **寿命 (Aging)** | 基準を満たす限り無限 | **最大3回**<br>3回交配したら引退 (Graveyardへ) |
| **レジェンド** | 特別扱いなし (保護のみ) | **不死身 (Immortal)**<br>例外的に寿命なし・競争免除 |

---

## 3. 具体的な挙動の違い

### ケース: 「成績は普通だが、長く生き残っている戦略」
- **V49.8**: ずっとBランクに残り、たまに交配に使われる。
- **V50.2**: 新しい戦略が入ってきた時、成績下位なら**即座に廃棄**される (Pool押し出し)。

### ケース: 「交配で生まれた子供が、親より優秀だった」
- **V49.8**: 親も子もKBに残り、似たような戦略が増殖する (多様性低下のリスク)。
- **V50.2**: **親が即座に殺される**。常に「より良いバージョン」だけが残る (進化の加速)。

### ケース: 「バックテスト20年で好成績」
- **V49.8**: Sランク採用。しかし「実は2006-2015だけ良くて、最近は負けている」可能性がある。
- **V50.2**: 後半5年のテストで**確実に弾かれる**。直近相場への適応力が保証される。

---

## 4. メリット・デメリット

### ✅ メリット
1.  **過学習への耐性**: 期間を分けることで「昔の相場にしか通用しない戦略」を排除できる。
2.  **インフレ防止**: 「定員100」と「親子デスマッチ」により、戦略数が爆発せず、常に新陳代謝が行われる。
3.  **質の保証**: 相対評価でTop2に絞り、さらに **OOS + CPCV** という二重の壁を設けることで、Sランクの信頼性が極大化する。

### ⚠️ デメリット (課題)
1.  **初期の空虚**: 全TF・全通貨で「定員100」埋まるまで、Aランク昇格が起きない (立ち上がりに時間がかかる)。
    - *対策: 「定員20」からスタートし、徐々に枠を広げる等の調整が可能。*
2.  **計算コスト増**: 全戦略に対してバックテストを2回行うため、計算リソースを消費する。
    - *対策: V49.8で導入したSQL化により、メタデータ管理は軽量化済み。*

---

この設計比較でイメージと合致していますか？
合致していれば、実装フェーズ (`Phase 20`) に進みます。
