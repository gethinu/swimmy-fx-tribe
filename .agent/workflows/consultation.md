---
description: AIがユーザーに課題を相談し、方針を仰ぐためのプロセス
---

# /consult - AI Proactive Consultation

このワークフローは、AIが「認識できていない課題」や「指示が難しい状況」を察知した際に、ユーザーに対して構造化された質問を行い、方向性を修正するためのものです。AIは実行中に迷いが生じた場合、このプロセスを参考に `notify_user` を行います。

## 実行トリガー
- ユーザーの意図が曖昧で、勝手な解釈が危険な場合。
- 複数の実装方針があり、トレードオフが大きい場合（例：「A案は早いが汚い、B案は遅いが綺麗」）。
- 予期せぬ技術的障壁により、当初の計画が破綻した場合。
- 未知のファイルや仕様に遭遇し、前提が崩れた場合。

## プロセス手順

### 1. 状況の要約 (Status Quo)
現在何をしていて、何につまずいているか簡潔に述べます。専門用語を避け、ビジネス/機能への影響を中心に説明します。

### 2. 核心的課題 (The Core Issue)
問題の本質を「1行」で定義します。
例：「既存のデータ構造と新機能の整合性が取れない」

### 3. AIの仮説・提案 (Options)
可能な解決策を提示し、それぞれのメリット・デメリット（特にリスク）を明示します。
- **Option A (AI推奨)**: ...
- **Option B (代替案)**: ...

### 4. ユーザーへの質問 (Questions)
ユーザーが即答できる形式（Yes/No、A/B選択、数値指定など）で質問します。
オープンクエスチョン（「どうしますか？」）は避け、「A案で進めて良いですか？」のように具体的に聞きます。

## 通知フォーマット (例)

```markdown
# 🛑 Consultation Required: [トピック名]

**状況**: リクルートプロセスを加速させたいが、CPUリソースが上限に達しており、これ以上の並列化はシステムクラッシュのリスクがあります。
**課題**: スピードと安定性のトレードオフ（安全性限界への到達）。

**提案**:
- **Option A (Deep Validate)**: 速度を落とし、プロファイリングを行ってボトルネックを特定する。（安全・確実・遅い）
- **Option B (Risk On)**: クラッシュ覚悟でプロセス優先度を上げ、限界まで回す。（危険・高速）

**質問**:
1. 現在の開発フェーズにおいて、システムの安定性よりもスピードを優先しますか？ (Yes/No)
```

このワークフローは、AIが自律的に判断できない領域（ビジネス価値、リスク許容度）において、ユーザーの意思決定を仰ぐためのプロトコルです。
